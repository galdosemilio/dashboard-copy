<div class="ccr-title" fxLayout="row" fxLayoutAlign=" end">
  <h2 fxFlex>
    {{ 'BOARD.APPOINTMENT_NEW' | translate }}
  </h2>
</div>
<div fxLayoutAlign="center center" class="ccr-overlay" *ngIf="isLoading">
  <mat-spinner></mat-spinner>
</div>

<div class="appointment-body" fxLayout="column" fxFlex fxLayout.gt-sm="row" fxLayoutAlign=" stretch" fxLayoutGap="20px">
  <div fxFlex="25%">
    <form [formGroup]="form" novalidate >
      <div fxLayout="row" fxLayoutGap="7px" *ngIf="meetingTypes && meetingTypes.length">
        <mat-form-field >
          <mat-select formControlName="meetingType" [placeholder]="'RIGHT_PANEL.MEETING_TYPE' | translate">
            <mat-select-trigger>
              <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="7px">
                <span>{{ selectedMeetingType ? selectedMeetingType.description : '' }}</span>
                <span *ngIf="selectedMeetingType" class="meeting-type-color-bullet" [style.background]="selectedMeetingType.colors.default" ></span>
              </div>
            </mat-select-trigger>
            <mat-option *ngFor="let type of meetingTypes" [value]="type" [style.border-left]="'10px solid ' + type.colors.default">{{ type.description }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div fxLayout="row" fxLayoutGap="7px">
        <mat-form-field>
          <mat-select formControlName="duration" [placeholder]="'BOARD.DURATION' | translate">
            <mat-option *ngFor="let d of durations" [value]="d.value">
              {{ d.viewValue | translate }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div fxLayout="row" fxLayoutGap="7px">
        <mat-form-field>
          <mat-select formControlName="providerId" [placeholder]="'BOARD.PREFERRED_PROVIDER' | translate">
            <mat-option *ngFor="let c of coaches" [value]="c.id">
              {{ c.name | translate }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </form>
  </div>
  <div fxFlex="40%">
    <mat-calendar
      [minDate]="now"
      [selected]="selectedDate"
      (selectedChange)="onSelectDate($event)"
      [showActionControls]="false"
    ></mat-calendar>
  </div>
  <div fxFlex="35%" class="time-slots-wrap">
    <div class="time-slots" >
      <div
        *ngFor="let slot of timeSlots"
        (click)="onSelectSlot(slot)"
        [class]="selectedSlot && slot.slotStartTime.local === selectedSlot.slotStartTime.local ? 'time-slot active' : 'time-slot'"
      >
        <p>{{ slot.slotStartTime.local | amDateFormat:'hh:mm a' }}</p>
      </div>
    </div>
  </div>
</div>
<div class="appointment-actions" fxLayout="column" fxLayoutAlign="center end">
  <div>
    <p *ngIf="selectedSlot">{{ selectedSlot.slotStartTime.local | amDateFormat:'LLLL' }}</p>
    <button [disabled]="form.invalid" (click)="onSubmit()" class="ccr-button" color="primary" mat-button>
      <span>{{ 'BOARD.APPOINTMENT_BOOK' | translate }}</span>
    </button>
  </div>
</div>
