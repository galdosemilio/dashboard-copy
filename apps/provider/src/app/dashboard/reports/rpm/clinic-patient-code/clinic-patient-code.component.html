<div fxLayout="row" fxLayoutAlign="space-between start">
  <div fxLayout="row" fxLayoutAlign="start start">
    <mat-icon class="title-icon" [style.margin]="'8px 8px 0 0'" >receipt</mat-icon>
    <div>
      <app-service-type-selector (serviceTypeChange)="onServiceTypeChange($event)"></app-service-type-selector>
    </div>
  </div>
  <!-- <button
    [disabled]="!source.isLoaded || source.isEmpty || source.isLoading || isLoading"
    (click)="downloadCSV()"
    mat-button class="ccr-align-center">
      {{ 'REPORTS.EXPORT_CSV' | translate }}
      <mat-icon>file_download</mat-icon>
  </button> -->
</div>
<p>Listing of current non billable CPT codes.</p>
<ccr-datasource-overlay
  [source]="source"
  class="ccr-table ccr-expand-table ccr-table-stats">
<div class="ccr-expandable-table-container">
  <div fxLayoutAlign="center center" class="ccr-overlay" *ngIf="isLoading">
      <mat-spinner></mat-spinner>
  </div>
  <div class="ccr-table ccr-expand-table ccr-table-stats">
    <div class="ccr-expandable-table">
      <table>
        <caption hidden>{{ 'REPORTS.CLINIC_PATIENT_CODE' | translate }}</caption>
        <thead>
          <th>ID</th>
          <th>Name</th>
          <!-- <th>Unique Patients</th> -->
          <th>Episodes of Care</th>
          <th *ngFor="let heading of headings">{{ heading }}</th>
        </thead>
        <tbody>
          <tr
            *ngFor="let org of tableData; let i = index"
            [ngClass]="{
              'row-even': i % 2 === 0,
              'row-odd': i % 2 === 1,
              'last-row': i === tableData.length - 1
            }"
          >
            <td>{{ org.organization.id }}</td>
            <td>{{ org.organization.name }}</td>
            <!-- <td>{{ org.patientsUniqueCount }}</td> -->
            <td>{{ org.uniqueRPMEpisodesOfCare }}</td>
            <td *ngFor="let code of org.codes">{{ org.uniqueRPMEpisodesOfCare - code.satisfiedCount }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>